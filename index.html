<!doctype html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
  <meta name="viewport" content="width=700">
  <title>A Month in the Life of the MBTA</title>

  <link href='styles/main.css' rel='stylesheet' type='text/css'>
</head>
<body>

  <!-- Header -->
  <div class="full-width header">
    <div class="container">
      <div class="graphic">
      </div>
      <div class="caption">
        <div class="sign">
          <div class="sign-top">
            <h1>Everything you want to know about the T</h1>
          </div>
          <div class="sign-bottom">
            <h2>A visual exploration of the Boston subway system</h1>
          </div>
        </div>
        <p class="authors">
          Michael Barry &amp; Brian Card
        </p>
      </div>
    </div>
  </div>

  <!-- Intro -->
  <div class="full-width section-intro">
    <div class="container">
      <p>Boston’s Massachusetts Bay Transit Authority (MBTA) operates the 4th busiest subway system in the U.S. after New York, Washington, and Chicago.  If you live in or around the city you have probably ridden on it.  You may remember subway rides that were slow, cars that were crowded, or everything going smoothly.  When you get off the train, however, you lose sight of the subway until you need to ride it again.  It’s hard to know if you left at a different time if the trains would be less crowded or what the experience is like on the other side of the system.</p>
      <p>The MBTA publishes a substantial amount of subway data.  They provide the full schedule in General Transit Feed Specification (GTFS) format which powers Google’s transit directions.  They also publish realtime train locations for the Red, Orange, and Blue lines (but not Green or Silver).  We captured this realtime data for the entire month of February, 2014.  Also, working with the MBTA, we were able to acquire per-minute entry and exit counts at each station measured at the turnstiles used for payment.</p>
      <p>We attempt to present this information to help people in Boston better understand the trains, how people use the trains, and how the people and trains interact with each other.</p>
    </div>
  </div>

  <!-- The Trains -->
  <div class="full-width section-trains">
    <div class="container">
      <h2>The Trains</h2>

      <p>In a typical weekday, trains make approximately 1150 trips on the red, orange, and blue lines starting at 5AM and continuing through 1AM the next morning.  On Saturdays trains make 870 trips and on Sundays they make 760.</p>

      <div class="table-inset">
        <div class="table-caption">Average Number of Trips per Day</div>
        <table class="table">
          <thead>
            <tr><th>Line</th><th>Weekdays</th><th>Saturdays</th><th>Sundays</th></tr>
          </thead>
          <tbody>
            <tr><td>Red</td><td>450</td><td>320</td><td>380</td></tr>
            <tr><td>Orange</td><td>350</td><td>260</td><td>260</td></tr>
            <tr><td>Blue</td><td>300</td><td>220</td><td>240</td></tr>
            <tr class="total"><td>Total</td><td>1150</td><td>870</td><td>760</td></tr>
          </tbody>
        </table>
      </div>

      <p>To better understand how the trains operate, we show all trips that trains took on the red, orange, and blue lines on a single day, Monday February 3 2014.  Each vertical line represents a station, and time extends from top to bottom.  Steeper lines indicate slower trains.  This visualization was first used by Étienne-Jules Marey to visualize train schedules and is typically called a “Marey Diagram.”</p>
    </div>
  </div>


  <!-- Marey -->
  <div class="full-width marey-container loading">
    <div class="container text-center">
      <h3>Subway Trips on Monday February 3, 2014</h3>
    </div>
    <div class="fixed-left">
      <div class="side-map">
      </div>
      <div class="side-caption">
        <p>Locations of each train on the <a href="#" data-line="red" class="highlight">red</a>, <a href="#" data-line="blue" class="highlight">blue</a>, and <a href="#" data-line="orange" class="highlight">orange</a> lines at <span class="marey-time"></span>.  Hover over the diagram to the right to display trains at a different time.</p>
        <p>Trains are on the right side of the track relative to the direction they are moving.</p>
        <p>
          See the
          <a href="#" data-dest="marey-morning-rush" class="scrollto">morning rush-hour</a>, 
          <a href="#" data-dest="marey-midday-lull" class="scrollto">midday lull</a>, 
          <a href="#" data-dest="marey-evening-rush" class="scrollto">afternoon rush-hour</a>, and the
          <a href="#" data-dest="marey-evening-lull" class="scrollto">evening lull</a>.
        </p>
      </div>
    </div>
    <div class="marey"></div>
  </div>

  <div class="full-width lined-up-marey-container">
    <div class="container">
      <p>
        To better compare the individual trips on this day, we line up the starting points and you can see the range of fastest to slowest trips, as well as variation.
        The trains slow down a little bit during the
        <a href="#" data-lo="7" data-hi="10" class="lined-up-highlight">morning rush-hour</a>,
        primarily on the outbound blue line.  The
        <a href="#" data-lo="16" data-hi="19" class="lined-up-highlight">afternoon rush-hour</a>
        is by-far the worst time of day for the red line.  The
        <a href="#" data-lo="10" data-hi="16" class="lined-up-highlight">midday lull</a>
        and
        <a href="#" data-lo="19" data-hi="24" class="lined-up-highlight">evening lull</a>
        are both fairly consistent.
      </p>

      <!-- Lined-up Marey -->
      <div class="lined-up-marey"></div>

    </div>
  </div>

  <!-- The People -->
  <div class="full-width section-people">
    <div class="container">
      <h2>The People</h2>
      <p>In a typical weekday, 425,000 people enter a station along the red, orange, or blue lines.  On weekends and holidays, that number drops to 200,000.  The busiest day was Friday February 7 when 470,187 people entered the system.</p>
      <p>
        This shows the total number of entries and exits for the red, orange, and blue line for every hour over the entire month.
        You can see weekends and weekdays with daily peaks at rush hour, as well as
        <a href="#" class="highlight" data-highlight="holidays">a holiday</a>,
        and
        <a href="#" class="highlight" data-highlight="snow">two snow storms</a>.
        Our exit data is less reliable since not all stations measure require that people exit through a turnstile.</p>

      <div class="turnstile-total"></div>
      
      <!-- Render a single row of the turnstile heatmap for sum of all stations -->
      <p>The busiest stations are all along the Red Line.  Harvard topped the list, followed closely by South Station, and then Downtown Crossing.  The graphic below shows turnstile entries over time across all stations.</p>

      <!-- Render the turnstile heatmap, sortable by position along the line or entries/decreasing -->
      <div class="turnstile-all"></div>

    </div>
  </div>

  <!-- The Interaction -->
  <div class="full-width section-people-trains">
    <div class="container">
      <h2>How People and Trains Affect Each Other</h2>
      <p>When you look back at the Marey diagram, the slope of each line tells you how fast a train is going and the time it takes to get between stations.  When all of the start and stop times are lined up you can see a drastic variation in the time it takes to get between stops throughout the day.  If you have ever ridden the subway during rush hour then you have experienced what the steep lines in the Marey diagram feel like first-hand.</p>
      <p>What causes these delays?  It’s hard to know for sure, but what we can determine is that delays usually happen when more people are riding the subway.  The next visualization shows this correlation.</p>
    </div>
    
    <div class="interaction-all"></div>
    
    <div class="container">
      <p>But how do these crowds and delay typically affect you on your commute?  Choose the two stations you typically commute between on a line</p>
      
      <!-- figure out graphic here that shows variation on someone's commute -->
      <div class="placeholder interaction-specific"></div>

    </div>
  </div>

  <!-- The Conclusion -->
  <div class="full-width section-conclusion">
    <div class="container">
      <h2>Summary</h2>
      <p>Through publicly available data, we have the tools to understand the subway system better than we ever have before.  We have seen how the system operates on a daily basis, how people use the system and how that affects the trains, and how the trains and people affect you.</p>
      <p>Through our analysis and the realtime data feeds, you can also take these insights with you whenever you ride the train.  Bookmark <a href="https://mbta.meteor.com" target="_blank">mbta.meteor.com</a> on your mobile phone phone and you can check it any time to see up-to-the-minute congestion and delay information.</p>
    </div>
  </div>

  <!-- The Code -->
  <script type="text/javascript" src="bower_components/es6-shim/es6-shim.js"></script>
  <script type="text/javascript" src="bower_components/moment/moment.js"></script>
  <script type="text/javascript" src="bower_components/underscore/underscore.js"></script>
  <script type="text/javascript" src="bower_components/d3/d3.min.js"></script>
  <script type="text/javascript" src="bower_components/d3-tip/index.js"></script>
  <script type="text/javascript" src="scripts/horizon.js"></script>
  <script type="text/javascript" src="bower_components/jquery/dist/jquery.min.js"></script>
  <script type="text/javascript" src="scripts/first.js"></script>
  <script type="text/javascript" src="scripts/files.js"></script>
  <script type="text/javascript" src="scripts/dataloader.js"></script>
  <script type="text/javascript" src="scripts/header.js"></script>
  <script type="text/javascript" src="scripts/marey.js"></script>
  <script type="text/javascript" src="scripts/turnstile.js"></script>
  <script type="text/javascript" src="scripts/delay.js"></script>
</body>
</html>